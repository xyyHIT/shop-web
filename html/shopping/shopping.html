<!DOCTYPE html>
<html>
	<head>
		<meta charset="utf-8">
		<title>购物袋</title>
		<meta name="viewport" content="initial-scale=1.0, maximum-scale=1.0, user-scalable=no" />
		<meta name="format-detection" content="telephone=no">
		<script src="/shop/js/rem.js"></script>
		<link href="/shop/css/base.css" rel="stylesheet" type="text/css" />
		<link href="/shop/css/font/iconfont.css" rel="stylesheet" type="text/css" />
		<script src="/shop/css/font/iconfont.js"></script>
		<style>
			body{ padding-bottom: 10rem; background: #f9f9f9;}
			.noData{ position: fixed; left: 50%; top: 50%; text-align: center; -webkit-transform: translate(-50%,-50%);}
			.noData i.iconfont{ font-size: 9.8rem; color: #aaa;}
			.noData span{ display: inline-block; font-size: 1.3rem; color: #aaa;}
			.noData em{ font-size: 1.5rem; color: #5F5F5F;}
			.noData a{ display: inline-block; width: 8rem; height: 2.8rem; margin-top: 2rem; line-height: 2.8rem; font-size: 1.2rem; color: #EC4747; text-align: center; border: 1px solid #EC4747; border-radius: 5px;}
			
			.box{ margin-bottom: .5rem;}
			i.icon-queren1{ font-size: 1.8rem; color: #EC4747;}
			i.icon-querenoff1{ font-size: 1.7rem; color: #333;}
			.box h2{ height: 4rem; line-height: 4rem; background: #FAF9FB;}
			.box h2 i{ display: inline-block; vertical-align: top;}
			.box h2 i.icon-queren1,.box h2 i.icon-querenoff1{ margin-left: .3rem; width: 3.2rem; text-align: center;}
			.box h2 i.icon-zhankai-copy{ font-size: 1.1rem; color: #979797;}
			.box h2 a{ display: inline-block; max-width: 60%; height: 4rem; font-size: 1.3rem; color: #3C3C3C; overflow: hidden; text-overflow: ellipsis; word-break: break-all; white-space: nowrap;}
			.box ul{ background: #fff;}
			.box ul li{ position: relative; height: 13rem; padding: 1.5rem 1.5rem 1.5rem 11.5rem; border-bottom: 1px solid #EFEFEF;}
			.box ul li:last-child{ border-bottom: none;}
			.box ul li i.icon-queren1,.box ul li i.icon-querenoff1{ position: absolute; left: .3rem; top: 5.2rem; width: 3.2rem; height: 3.2rem; line-height: 3.2rem; text-align: center;}
			.box ul li > img{ position: absolute; top: 1.6rem; left: 3.8rem; width: 7rem; height: 7rem; border-radius: 5px;}
			.box ul li strong{ font-size: 1.3rem; color: #3C3C3C; word-break: break-all;}
			.box ul li p{ margin-top: .5rem; font-size: 1.2rem;}
			.box ul li p span{ color: #EC4747;}
			.box ul li p em{ float: right; padding-right: 2rem; color: #878787;}
			.box ul li .addSubtract{ position: absolute; left: 14rem; bottom: 1.2rem; width: 7rem; height: 2.5rem; background: #FAF9FB;}
			.box ul li .addSubtract input{ width: 5rem; height: 2.5rem; margin-left: 1rem; font-size: 1.3rem; color: #5F5F5F; text-align: center; border: none; background: #FAF9FB;}
			.box ul li .addSubtract i.iconfont,.box ul li .addSubtract svg.icon{ position: absolute; top: -.1rem; width: 2.5rem; height: 2.5rem; font-size: 2.5rem;}
			.box ul li .addSubtract svg.icon{ left: -2rem; color: #EFEFEF;}
			.box ul li .addSubtract i.icon-zengjia{ right: -2rem; color: #878787;}
			.box ul li .addSubtract svg.icon { display: block; width: 2.6rem; height: 2.6rem; fill: currentColor; overflow: hidden;}
			.box ul li i.icon-shanchu71{ position: absolute; right: 1rem; bottom: 1.2rem; width: 2.5rem; height: 2.5rem; line-height: 2.5rem; font-size: 1.5rem; color: #5F5F5F; text-align: center;}
			
			.operate{ position: fixed; left: 0; bottom: 4.8rem; width: 100%; height: 4.8rem; padding: 0 11rem 0 4rem; font-size: 1.1rem; color: #3C3C3C; text-align: right; line-height: 4.8rem; background: #fff;}
			.operate i{ position: absolute; left: 0; width: 4rem; text-align: center;}
			.operate span{ font-size: 1.5rem; color: #EC4747;}
			.operate a{ position: absolute; right: 0; top: 0; display: block; width: 10rem; font-size: 1.3rem; color: #fff; text-align: center; background: #EC4747; word-break: break-all;}
		</style>
	</head>
	<body>
		<div class="container">
			<!--<div class="noData">
				<i class="iconfont icon-gouwudai_kong"></i><br />
				<span>购物袋是空的</span><br />
				<em>去首页逛逛吧</em><br />
				<a href="/shop/html/index/index.html">去首页</a>
			</div>-->
			<div class="list">
				<div class="box">
					<h2>
						<i class="iconfont icon-querenoff1 icon-radio"></i>
						<a>viishow旗舰店viishow旗舰店viishow旗舰店</a>
						<i class="iconfont icon-zhankai-copy"></i>
					</h2>
					<ul>
						<li>
							<i class="iconfont icon-querenoff1 icon-radio"></i>
							<img src="../../imgs/test/0.jpg" />
							<strong class="over2">自然造物 | 一物 ·【看道·寻瓷】</strong>
							<p class="fix">
								<span>¥200</span><em>x1</em>
							</p>
							<div class="addSubtract">
								<svg class="icon" aria-hidden="true">
								    <use xlink:href="#icon-jianshao"></use>
								</svg><input type="tel" value="1" maxlength="4" /><i class="iconfont icon-zengjia"></i>
							</div>
							<i class="iconfont icon-shanchu71"></i>
						</li>
					</ul>
				</div>
				<div class="box">
					<h2>
						<i class="iconfont icon-querenoff1 icon-radio"></i>
						<a>viishow旗舰店</a>
						<i class="iconfont icon-zhankai-copy"></i>
					</h2>
					<ul>
						<li>
							<i class="iconfont icon-querenoff1 icon-radio"></i>
							<img src="../../imgs/test/0.jpg" />
							<strong class="over2">自然造物 | 一物 ·【看道·寻瓷】看道·寻瓷看道·寻瓷</strong>
							<p class="fix">
								<span>¥200</span><em>x1</em>
							</p>
							<div class="addSubtract">
								<svg class="icon" aria-hidden="true">
								    <use xlink:href="#icon-jianshao"></use>
								</svg><input type="tel" value="1" maxlength="4" /><i class="iconfont icon-zengjia"></i>
							</div>
							<i class="iconfont icon-shanchu71"></i>
						</li>
						<li>
							<i class="iconfont icon-querenoff1 icon-radio"></i>
							<img src="../../imgs/test/0.jpg" />
							<strong class="over2">自然造物 | 一物 ·【看道·寻瓷】看道·寻瓷看道·寻瓷</strong>
							<p class="fix">
								<span>¥200</span><em>x1</em>
							</p>
							<div class="addSubtract">
								<svg class="icon" aria-hidden="true">
								    <use xlink:href="#icon-jianshao"></use>
								</svg><input type="tel" value="1" maxlength="4" /><i class="iconfont icon-zengjia"></i>
							</div>
							<i class="iconfont icon-shanchu71"></i>
						</li>
					</ul>
				</div>
				<div class="operate">
					<i class="iconfont icon-querenoff1 icon-radio"></i>
					合计：<span>¥<b id="summation">0.00</b></span>
					<a>结算（<b id="settleAccounts">0</b>）</a>
				</div>
			</div>
		</div>
	</body>
	
	<script src="/shop/js/jquery-2.1.4.min.js"></script>
	<script src="http://res.wx.qq.com/open/js/jweixin-1.0.0.js"></script>
	<script src="/shop/js/public.js"></script>
	<script src="/shop/js/fastclick.js"></script>
	<script>
		
		$(function () {
			
			//加
			$("body").on("click",".icon-zengjia",function(){
				var _t = $(this),
					num = parseInt(_t.parents(".addSubtract").find("input").val())+1;
				_t.parents(".addSubtract").find("input").val(num);
				_t.parents("li").find(".icon-radio").removeClass("icon-querenoff1").addClass("icon-queren1");
				funMoneyAndNum();
			})
			//减
			$("body").on("click",".addSubtract svg.icon",function(){
				var _t = $(this),
					num = parseInt(_t.parents(".addSubtract").find("input").val());
				if(num > 1){
					_t.parents(".addSubtract").find("input").val(num-1);
					_t.parents("li").find(".icon-radio").removeClass("icon-querenoff1").addClass("icon-queren1");
					funMoneyAndNum();
				}
			})
			//删除
			$("body").on("click",".icon-shanchu71",function(){
				var _t = $(this);
				if(_t.parents("ul").find("li").length <= 1){
					_t.parents(".box").remove();
				}else{
					_t.parents("li").remove();
				}
				//去掉全选按钮选中状态
				if($(".list .box ul li .icon-radio").length == 0){
					$(".operate .icon-radio").removeClass("icon-queren1").addClass("icon-querenoff1");
				}
				funMoneyAndNum();
			})
			//点击单个商品的单选按钮
			$("body").on("click",".list .box ul li .icon-radio",function(){
				var _t = $(this);
				if(_t.hasClass("icon-queren1")){
					_t.removeClass("icon-queren1").addClass("icon-querenoff1");
				}else{
					_t.removeClass("icon-querenoff1").addClass("icon-queren1");
				}
				
				var len1 = _t.parents("ul").find(".icon-radio").length,
					len2 = _t.parents("ul").find(".icon-queren1").length;
				if(len1 == len2){
					_t.parents(".box").find("h2 .icon-radio").removeClass("icon-querenoff1").addClass("icon-queren1");
				}else{
					_t.parents(".box").find("h2 .icon-radio").removeClass("icon-queren1").addClass("icon-querenoff1");
				}
				
				var len3 = _t.parents(".list").find(".box .icon-radio").length,
					len4 = _t.parents(".list").find(".box .icon-queren1").length;
				if(len3 == len4){
					$(".operate .icon-radio").removeClass("icon-querenoff1").addClass("icon-queren1");
				}else{
					$(".operate .icon-radio").removeClass("icon-queren1").addClass("icon-querenoff1");
				}
				funMoneyAndNum();
			})
			//点击店铺的单选按钮
			$("body").on("click",".list .box h2 .icon-radio",function(){
				var _t = $(this);
				if(_t.hasClass("icon-queren1")){
					_t.parents(".box").find(".icon-radio").removeClass("icon-queren1").addClass("icon-querenoff1");
				}else{
					_t.parents(".box").find(".icon-radio").removeClass("icon-querenoff1").addClass("icon-queren1");
				}
				
				var len5 = _t.parents(".list").find(".box h2 .icon-radio").length,
					len6 = _t.parents(".list").find(".box h2 .icon-queren1").length;
				if(len5 == len6){
					$(".operate .icon-radio").removeClass("icon-querenoff1").addClass("icon-queren1");
				}else{
					$(".operate .icon-radio").removeClass("icon-queren1").addClass("icon-querenoff1");
				}
				funMoneyAndNum();
			})
			//点击全选按钮
			$("body").on("click",".operate .icon-radio",function(){
				var _t = $(this);
				if(_t.hasClass("icon-queren1")){
					$(".list .icon-radio").removeClass("icon-queren1").addClass("icon-querenoff1");
				}else{
					$(".list .icon-radio").removeClass("icon-querenoff1").addClass("icon-queren1");
				}
				funMoneyAndNum();
			})
			//结算
			$("body").on("click",".operate a",function(){
				if($(".list .box ul li .icon-queren1").length == 0){
					allFun.alertDiv("你还没有选择商品哦！");
					return false;
				}
				//funMoneyAndNum();
			})
		});
		
		//合计钱数，件数
		function funMoneyAndNum(){
			var moneyAll = 0,//合计钱数
				numAll = 0;//件数
			$(".list .box ul li .icon-radio").each(function(){
				var _t = $(this);
				if(_t.hasClass("icon-queren1")){
					numAll += parseFloat(_t.parents("li").find("input").val());
					moneyAll += parseFloat(_t.parents("li").find("p span").text().replace("¥","")) * parseFloat(_t.parents("li").find("input").val());
				}
			})
			$("#summation").text(moneyAll);//合计
			$("#settleAccounts").text(numAll);//件数
			//return numAll;
		}
	</script>
</html>